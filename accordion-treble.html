<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../local-dom/local-dom.html"  async >
<link rel="import" href="../animation-behaviors/scale-up-behavior.html">
<link rel="import" href="./accordion-button.html" async >
<!--

Shows drop down menu (works on chrome)

### Usage
The list displayed in the drop down menu can be set as an attribute.

    <drop-menu list-items='["first" ,"second"]'></drop-menu>

For an overlayed drop menu:

    <drop-menu overlay-menu list-items='["first" ,"second"]'></drop-menu>

### Styling
 Custom property | Description | Default
----------------|-------------|----------
`--item-background-color` | List item backround color | `#f1ecef`
`--item-color` | List item color used for fonts | `#302f31`
`--close-color` | Icon button hover color | `4775D1`
`--content-background` | Drop menu's background color | `white`
`--close-color` | Icon button hover color | `4775D1`
`--icon-button` | Mixin applied the icon button | `{}`

@demo demo/drop-menu-demo.html
-->
<dom-module id="accordion-treble">
    <template>
        <style>
            :host {}

            local-dom {
                height: 100vh;
                @apply(--layout-horizontal);
                @apply(--layout-center);
                @apply(--layout-justified);
            }

            #col1 {
                height: 82vh;
                @apply(--layout-vertical);
                @apply(--layout-justified);
            }

            #col2 {
                height: 92vh;
                padding: 0.2vw;
                margin-left: 0vh ;
                margin-right: 0vh;
                @apply(--layout-vertical);
                @apply(--layout-justified);
            }

            [mobile] #col2 {
                padding: 0.8vw;
            }

            [tablet] #col2 {
                padding: 0.6vw;
            }
        </style>
        <!-- local DOM -->
        <local-dom mobile="{{mobile}}" tablet="{{tablet}}" laptop="{{laptop}}">
            <div id="col1">
                <accordion-button close-index="8" open-index="10"  button-type="treble" state="{{state.21}}"></accordion-button>
                <accordion-button close-index="2" open-index="4"  button-type="treble" state="{{state.22}}"></accordion-button>
                <accordion-button close-index="6" open-index="7"  button-type="treble" state="{{state.23}}"></accordion-button>
                <accordion-button close-index="9" open-index="11"  button-type="treble" state="{{state.24}}"></accordion-button>
                <accordion-button close-index="14" open-index="13"  button-type="treble" state="{{state.25}}"></accordion-button>
                <accordion-button close-index="18" open-index="16"  button-type="treble" state="{{state.26}}"></accordion-button>
                <accordion-button close-index="21" open-index="19"  button-type="treble" state="{{state.27}}"></accordion-button>
                <accordion-button close-index="26" open-index="23"  button-type="treble" state="{{state.28}}"></accordion-button>
                <accordion-button close-index="30" open-index="25"  button-type="treble" state="{{state.29}}"></accordion-button>
                <accordion-button close-index="33" open-index="28"  button-type="treble" state="{{state.30}}"></accordion-button>
            </div>
            <div id="col2">
                <accordion-button close-index="13" open-index="15"  button-type="treble" state="{{state.10}}"></accordion-button>
                <accordion-button close-index="2" open-index="6"  button-type="treble" state="{{state.11}}"></accordion-button>
                <accordion-button close-index="7" open-index="9"  button-type="treble" state="{{state.12}}"></accordion-button>
                <accordion-button close-index="11" open-index="12"  button-type="treble" state="{{state.13}}"></accordion-button>
                <accordion-button close-index="14" open-index="16"  button-type="treble" state="{{state.14}}"></accordion-button>
                <accordion-button close-index="19" open-index="18"  button-type="treble" state="{{state.15}}"></accordion-button>
                <accordion-button close-index="23" open-index="21"  button-type="treble" state="{{state.16}}"></accordion-button>
                <accordion-button close-index="26" open-index="24"  button-type="treble" state="{{state.17}}"></accordion-button>
                <accordion-button close-index="31" open-index="28"  button-type="treble" state="{{state.18}}"></accordion-button>
                <accordion-button close-index="35" open-index="30"  button-type="treble" state="{{state.19}}"></accordion-button>
                <accordion-button close-index="38" open-index="33"  button-type="treble" state="{{state.20}}"></accordion-button>
            </div>
            <div id="col1">
                <accordion-button close-index="22" open-index="20" button-type="treble" state="{{state.0}}"></accordion-button>
                <accordion-button close-index="7" open-index="11" button-type="treble" state="{{state.1}}"></accordion-button>
                <accordion-button close-index="12" open-index="14" button-type="treble" state="{{state.2}}"></accordion-button>
                <accordion-button close-index="16" open-index="17" button-type="treble" state="{{state.3}}"></accordion-button>
                <accordion-button close-index="19" open-index="21" button-type="treble" state="{{state.4}}"></accordion-button>
                <accordion-button close-index="24" open-index="23" button-type="treble" state="{{state.5}}"></accordion-button>
                <accordion-button close-index="28" open-index="26" button-type="treble" state="{{state.6}}"></accordion-button>
                <accordion-button close-index="31" open-index="29" button-type="treble" state="{{state.7}}"></accordion-button>
                <accordion-button close-index="36" open-index="33" button-type="treble" state="{{state.8}}"></accordion-button>
                <accordion-button close-index="40" open-index="35" button-type="treble" state="{{state.9}}"></accordion-button>
            </div>

        <local-dom/>
    </template>
    <script>
        Polymer({
            is: "accordion-treble",
            observers: ['_swap(showingTreble)'],
            behaviors: [ScaleUpBehavior],
            listeners: {},
            properties: {
                state:{
                    type:Array,
                    value:[]
                }
            },
            noteOn: function(note){
                this.state[Math.floor(note/2)] = (note%2)+1 ;
                this._updateState() ;
            },
            noteOff: function(note){
                this.state[Math.floor(note/2)] = 0 ;
                this._updateState() ;
            },
            _swap: function(showingTreble) {
                if (showingTreble)
                    this.playAnimation('entry');
            },
            _updateState: function(){
                var arr =  this.state ;
                this.state = [] ;
                this.state = arr ;
            },
            ready: function () {
                this.playAnimation('entry');
                for ( var i = 0 ;i < 31 ;i ++ )
                    this.state.push(0) ;
            }
        });
    </script>
</dom-module>
