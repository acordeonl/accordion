<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../local-dom/local-dom.html" async>
<link rel="import" href="./accordion-button.html" async>
<link rel="import" href="../animation-behaviors/scale-up-behavior.html">
<!--

Shows drop down menu (works on chrome)

### Usage
The list displayed in the drop down menu can be set as an attribute.

    <drop-menu list-items='["first" ,"second"]'></drop-menu>

For an overlayed drop menu:

    <drop-menu overlay-menu list-items='["first" ,"second"]'></drop-menu>

### Styling
 Custom property | Description | Default
----------------|-------------|----------
`--item-background-color` | List item backround color | `#f1ecef`
`--item-color` | List item color used for fonts | `#302f31`
`--close-color` | Icon button hover color | `4775D1`
`--content-background` | Drop menu's background color | `white`
`--close-color` | Icon button hover color | `4775D1`
`--icon-button` | Mixin applied the icon button | `{}`

@demo demo/drop-menu-demo.html
-->
<dom-module id="accordion-bass">
    <template>
        <style>
            :host {}
            local-dom {
                height: 100vh;
                @apply(--layout-horizontal);
                @apply(--layout-center);
                @apply(--layout-justified);
            }
            #col {
                padding: 1.3vw;
                height: 51vh;
                @apply(--layout-vertical);
                @apply(--layout-justified);
            }
            [mobile] #col {
                padding: 1.8vw;
            }
            [tablet] #col {
                padding: 1.2vw;
            }
        </style>
        <!-- local DOM -->
        <local-dom mobile="{{mobile}}" tablet="{{tablet}}" laptop="{{laptop}}">
            <div id="col">
                <accordion-button close-index="139" open-index="101" text="s3" state="{{stateChords.3}}"  button-type="bass"></accordion-button>
                <accordion-button close-index="90" open-index="95" text="3" button-type="bass" state="{{state.3}}"></accordion-button>
                <accordion-button close-index="103" open-index="122" text="s4" state="{{stateChords.4}}"  button-type="bass"></accordion-button>
                <accordion-button close-index="95" open-index="88" text="4" button-type="bass" state="{{state.4}}"></accordion-button>
                <accordion-button close-index="107" open-index="107" text="s5" state="{{stateChords.5}}"  button-type="bass"></accordion-button>
                <accordion-button close-index="96" open-index="96" text="5" button-type="bass" state="{{state.5}}"></accordion-button>
            </div>
            <div id="col">
                <accordion-button close-index="133" open-index="124" text="s0" state="{{stateChords.0}}"  button-type="bass"></accordion-button>
                <accordion-button close-index="93" open-index="88" text="0" button-type="bass" state="{{state.0}}"></accordion-button>
                <accordion-button close-index="113" open-index="133" text="s1" state="{{stateChords.1}}"  button-type="bass"></accordion-button>
                <accordion-button close-index="86" open-index="93" text="1" button-type="bass" state="{{state.1}}" ></accordion-button>
                <accordion-button close-index="120" open-index="113" text="s2" state="{{stateChords.2}}"  button-type="bass"></accordion-button>
                <accordion-button close-index="91" open-index="86" text="2" button-type="bass" state="{{state.2}}" ></accordion-button>
            </div>
            <local-dom/>
        </template>
        <script>
            Polymer({
                is: "accordion-bass",
                observers: ['_swap(showingTreble)'],
                behaviors: [ScaleUpBehavior],
                listeners: {},
                properties: {
                    state: {
                        type: Array,
                        value: []
                    },
                    stateChords: {
                        type: Array,
                        value: []
                    }
                },
                _updateState: function () {
                    var arr = this.state;
                    this.state = [];
                    this.state = arr;
                },
                _updateStateChords: function () {
                    var arr = this.stateChords;
                    this.stateChords = [];
                    this.stateChords = arr;
                },
                _swap: function (showingTreble) {
                    if (!showingTreble) {
                        this.playAnimation('entry');
                    }
                },
                noteOn: function (note) {
                    this.state[Math.floor(note / 2)] = (note % 2) + 1;
                    this._updateState();
                },
                noteOff: function (note) {
                    this.state[Math.floor(note / 2)] = 0;
                    this._updateState();
                },
                chordNoteOn: function (note) {
                    this.stateChords[Math.floor(note / 2)] = (note % 2) + 1;
                    this._updateStateChords();
                },
                chordNoteOff: function (note) {
                    this.stateChords[Math.floor(note / 2)] = 0;
                    this._updateStateChords();
                },
                ready: function () {
                    this.playAnimation('entry');
                    for (var i = 0; i < 6; i++) {
                        this.state.push(0);
                        this.stateChords.push(0);
                    }
                }
            });
        </script>
    </dom-module>
